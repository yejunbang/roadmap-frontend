1. 代码开始执行，JavaScript 引擎对所有的代码进行区分。
2. 同步代码被压入栈中，异步代码根据不同来源加入到宏任务队列尾部，或者微任务队列的尾部。
3. 等待栈中的代码被执行完毕，此时通知任务队列，执行位于队列首部的宏任务。
4. 宏任务执行完毕，开始执行其关联的微任务。
5. 关联的微任务执行完毕，继续执行下一个宏任务，直到任务队列中所有宏任务被执行完毕。
6. 执行下一个任务队列。

步骤 3 - 4 - 5 就是一个事件循环的基本原理。